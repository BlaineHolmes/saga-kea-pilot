{
  "Dhcp4": {
    "interfaces-config": { 
      "interfaces": ["ens18"] 
    },
    "lease-database": {
      "type": "memfile",
      "persist": true,
      "name": "/var/lib/kea/kea-leases4.csv"
    },
    "control-socket": {
      "socket-type": "unix",
      "socket-name": "/var/run/kea/kea4-ctrl.sock"
    },
    "hooks-libraries": [
      {
        "library": "/usr/lib/x86_64-linux-gnu/kea/hooks/libdhcp_subnet_cmds.so"
      },
      {
        "library": "/usr/lib/x86_64-linux-gnu/kea/hooks/libdhcp_host_cmds.so"
      },
      {
        "library": "/usr/lib/x86_64-linux-gnu/kea/hooks/libdhcp_lease_cmds.so"
      }
    ],
    "valid-lifetime": 3600,
    "renew-timer": 900,
    "rebind-timer": 1800,
    
    // DDNS Configuration
    "ddns-send-updates": true,
    "ddns-override-no-update": true,
    "ddns-override-client-update": true,
    "ddns-replace-client-name": "when-present",
    "ddns-generated-prefix": "dhcp",
    "ddns-qualifying-suffix": "lan.sagaos.local",
    "ddns-update-on-renew": true,
    "ddns-conflict-resolution-mode": "check-with-dhcid",
    
    // D2 Client Configuration
    "dhcp-ddns": {
      "enable-updates": true,
      "server-ip": "127.0.0.1",
      "server-port": 53001,
      "sender-ip": "127.0.0.1",
      "sender-port": 0,
      "max-queue-size": 1024,
      "ncr-protocol": "UDP",
      "ncr-format": "JSON"
    },
    
    "subnet4": [
      {
        "id": 1,
        "subnet": "10.0.0.0/16",
        "pools": [
          { "pool": "10.0.10.100 - 10.0.10.200" }
        ],
        "option-data": [
          { "name": "routers", "data": "10.0.0.1" },
          { "name": "domain-name-servers", "data": "10.0.0.53" },
          { "name": "domain-name", "data": "lan.sagaos.local" }
        ]
      }
    ]
  },
  
  "DhcpDdns": {
    "ip-address": "127.0.0.1",
    "port": 53001,
    "dns-server-timeout": 5000,
    "ncr-protocol": "UDP",
    "ncr-format": "JSON",
    
    "tsig-keys": [
      {
        "name": "sagaos-ddns-key",
        "algorithm": "HMAC-SHA256",
        "secret": "REPLACE_WITH_ACTUAL_TSIG_SECRET"
      }
    ],
    
    "forward-ddns": {
      "ddns-domains": [
        {
          "name": "lan.sagaos.local.",
          "key-name": "sagaos-ddns-key",
          "dns-servers": [
            {
              "ip-address": "127.0.0.1",
              "port": 53
            }
          ]
        }
      ]
    },
    
    "reverse-ddns": {
      "ddns-domains": [
        {
          "name": "0.10.in-addr.arpa.",
          "key-name": "sagaos-ddns-key",
          "dns-servers": [
            {
              "ip-address": "127.0.0.1",
              "port": 53
            }
          ]
        }
      ]
    }
  },
  
  "Logging": {
    "loggers": [
      {
        "name": "kea-dhcp4",
        "output_options": [
          {
            "output": "/var/log/kea/kea-dhcp4.log",
            "maxver": 8,
            "maxsize": 10485760,
            "flush": true
          }
        ],
        "severity": "INFO",
        "debuglevel": 0
      },
      {
        "name": "kea-dhcp-ddns",
        "output_options": [
          {
            "output": "/var/log/kea/kea-ddns.log",
            "maxver": 8,
            "maxsize": 10485760,
            "flush": true
          }
        ],
        "severity": "INFO",
        "debuglevel": 0
      }
    ]
  }
}
